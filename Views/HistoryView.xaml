<UserControl x:Class="StokTakip.Views.HistoryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,15">
             <TextBlock Text="İşlem Geçmişi" FontSize="20" FontWeight="Bold" Foreground="{StaticResource TextColor}"/>
             <TextBlock Text="Tüm giriş ve çıkış işlemleri burada listelenir." FontSize="12" Foreground="Gray"/>
        </StackPanel>

        <Grid Grid.Row="1">
        <Border Background="{StaticResource CardBackground}" CornerRadius="12" Padding="20">
            <Border.Effect>
                <DropShadowEffect Color="#E2E8F0" BlurRadius="20" ShadowDepth="5" Opacity="0.5"/>
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Text="İşlem Geçmişi" FontSize="20" FontWeight="Bold" Margin="0,0,0,15" Foreground="{StaticResource TextPrimary}"/>

                <TabControl Grid.Row="1" BorderThickness="0" Background="Transparent" Margin="0">
                    <!-- Stok Çıkış -->
                    <TabItem Header="Stok Çıkış" Style="{StaticResource MainTabItemStyle}">
                        <Grid Margin="0,15,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock x:Name="TxtNoSales" Text="Henüz bir çıkış işlemi yok." 
                                       HorizontalAlignment="Center" VerticalAlignment="Center" 
                                       FontSize="16" Foreground="{StaticResource TextSecondary}" Visibility="Collapsed"/>
                            
                            <DataGrid x:Name="GridSalesHistory" IsReadOnly="True" ColumnWidth="*" MouseDoubleClick="GridSalesHistory_MouseDoubleClick">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Tarih" Binding="{Binding Date, StringFormat=\{0:dd.MM.yyyy HH:mm\}}" Width="140"/>
                                    <DataGridTextColumn Header="Ürün" Binding="{Binding ProductName}" Width="*"/>
                                    <DataGridTextColumn Header="Miktar" Binding="{Binding Quantity}" Width="80"/>
                                    <DataGridTextColumn Header="Toplam Maliyet" Binding="{Binding CalculatedCost, StringFormat=C2}" Width="120"/>
                                    <DataGridTextColumn Header="Detay (FIFO)" Binding="{Binding Breakdown}" Width="2.5*"/>
                                </DataGrid.Columns>
                            </DataGrid>

                            <!-- Sales Pagination -->
                            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                                <TextBlock Text="Sayfa Başına:" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="{StaticResource TextSecondary}"/>
                                <ComboBox x:Name="CmbSalesPageSize" Width="70" Margin="0,0,20,0" SelectionChanged="CmbSalesPageSize_SelectionChanged" SelectedIndex="0" VerticalAlignment="Center" VerticalContentAlignment="Center">
                                    <ComboBoxItem Content="10"/>
                                    <ComboBoxItem Content="20"/>
                                    <ComboBoxItem Content="50"/>
                                    <ComboBoxItem Content="100"/>
                                    <ComboBoxItem Content="Tümü"/>
                                </ComboBox>

                                <Button x:Name="BtnPrevSales" Content="&lt;" Style="{StaticResource GhostBtnStyle}" Width="35" Height="30" Margin="0,0,5,0" Click="BtnPrevSales_Click" IsEnabled="False"/>
                                <TextBlock x:Name="TxtSalesPageInfo" Text="1 / 1" VerticalAlignment="Center" FontSize="14" Margin="10,0" Foreground="{StaticResource TextPrimary}"/>
                                <Button x:Name="BtnNextSales" Content="&gt;" Style="{StaticResource GhostBtnStyle}" Width="35" Height="30" Click="BtnNextSales_Click" IsEnabled="False"/>
                            </StackPanel>
                        </Grid>
                    </TabItem>

                    <!-- Stok Giriş Geçmişi -->
                    <TabItem Header="Stok Girişleri" Style="{StaticResource MainTabItemStyle}">
                        <Grid Margin="0,15,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock x:Name="TxtNoStock" Text="Henüz stok girişi yapılmamış." 
                                       HorizontalAlignment="Center" VerticalAlignment="Center" 
                                       FontSize="16" Foreground="{StaticResource TextSecondary}" Visibility="Collapsed"/>

                            <DataGrid x:Name="GridStockHistory" IsReadOnly="True" ColumnWidth="*" MouseDoubleClick="GridStockHistory_MouseDoubleClick">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Tarih" Binding="{Binding DateAdded, StringFormat=\{0:dd.MM.yyyy HH:mm\}}" Width="140"/>
                                    <DataGridTextColumn Header="Ürün" Binding="{Binding ProductName}" Width="*"/>
                                    <DataGridTextColumn Header="Maliyet (Birim)" Binding="{Binding CostPrice, StringFormat=C2}" Width="120"/>
                                    <DataGridTextColumn Header="Miktar" Binding="{Binding OriginalQuantity}" Width="100"/>
                                    <DataGridTextColumn Header="Kalan" Binding="{Binding RemainingQuantity}" Width="100"/>
                                </DataGrid.Columns>
                            </DataGrid>

                            <!-- Stock Pagination -->
                            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                                <TextBlock Text="Sayfa Başına:" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="{StaticResource TextSecondary}"/>
                                <ComboBox x:Name="CmbStockPageSize" Width="70" Margin="0,0,20,0" SelectionChanged="CmbStockPageSize_SelectionChanged" SelectedIndex="0" VerticalAlignment="Center" VerticalContentAlignment="Center">
                                    <ComboBoxItem Content="10"/>
                                    <ComboBoxItem Content="20"/>
                                    <ComboBoxItem Content="50"/>
                                    <ComboBoxItem Content="100"/>
                                    <ComboBoxItem Content="Tümü"/>
                                </ComboBox>

                                <Button x:Name="BtnPrevStock" Content="&lt;" Style="{StaticResource GhostBtnStyle}" Width="35" Height="30" Margin="0,0,5,0" Click="BtnPrevStock_Click" IsEnabled="False"/>
                                <TextBlock x:Name="TxtStockPageInfo" Text="1 / 1" VerticalAlignment="Center" FontSize="14" Margin="10,0" Foreground="{StaticResource TextPrimary}"/>
                                <Button x:Name="BtnNextStock" Content="&gt;" Style="{StaticResource GhostBtnStyle}" Width="35" Height="30" Click="BtnNextStock_Click" IsEnabled="False"/>
                            </StackPanel>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>

        </Border>
    </Grid>
    </Grid>
</UserControl>
